version: '3.8'

services:
  web:
    container_name: ine_web_dev
    # Sobrescribir el comando para usar el servidor de desarrollo de Flask
    # Usamos python run.py ya que el run.py llama a app.run(debug=True)
    command: python run.py
    
    # Montar el código fuente para hot-reload
    volumes:
      - ./app:/app/app       # Montar la carpeta de la aplicación
      - ./run.py:/app/run.py # Montar el run.py
      - ./logs:/app/logs     # Carpeta para logs
      
    ports:
      # Mapeo de puertos para acceder desde el host
      - "${APP_PORT:-8000}:${APP_PORT:-8000}"
      
    # Configuración de desarrollo
    environment:
      FLASK_CONFIG: development
      # Carga las variables de .env (aunque ya están en el base, es buena práctica)
    env_file:
      - .env